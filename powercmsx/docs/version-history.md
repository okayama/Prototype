## 2019\-04\-19

version 1\.016

- モデルの hierarchy のデフォルト値を「0」に設定し、アップグレード処理のために version を 1\.016 としました。
- プラグインにモデルのアップグレードがある時、バッヂがヘッダに表示されない問題を修正しました。
- アクティビディ選択のドロップダウンの権限による絞り込みを追加しました。
- モデルのインデックス指定可能カラムのチェック対象に誤りがあったので修正しました。
- DisplayOptions プラグインでシステム管理者以外で設定が正しく反映されない問題を修正しました。
- プラグインによるコールバック処理が追加登録される問題を修正しました。
- 公開側サイトの検索フィルタからカラム status と rev\_type を除外しました。
- モデルの編集画面でカラムの「詳細」ボタンをクリックした時に画面の表示項目をリセットするようにしました。
- 「ワークフローを隠す」ボタンの表示位置を調整しました。
- ユーザー設定のない時、ラジオボタンとチェックボックスの境界線のコントラスト比を高くしました。

## 2019\-04\-18

version 1\.015

- allow\_static, static\_conditional環境変数を追加しました。
- allow\_static 指定のある時 pt\-view.php が CMS管理外の静的ファイルを返すようになります。
- debug プロパティ指定のある時、アップロード欄のスタイルが崩れる問題を修正しました。
- MySQL の sql\_mode で STRICT\_TRANS\_TABLES 指定のある時、アイテムが保存されない問題を修正しました。
- クラス PADO の PADO\_DB\_BLOB2FILE 指定のある時\(バイナリデータを外部ファイルに保存する\)の不具合を修正しました。この機能はベータ版です。
- DBカラムのプロパティ変更時に mt\_columnのレコードが正しく更新されない問題を修正しました。
- 設問の正規化設定のある時メールで濁点が文字化けする問題を修正しました。
- 同じロールを複数のスペースに割り当てた時、最後のロールだけしか有効化されない問題を修正しました。
- テーマ適用後の再構築結果がテーマによって正しくならない問題を修正しました。
- 30日以上運用している環境でアクティビティダッシュボードのグラフが正しく表示されない問題を修正しました。
- バーの配色が明るく、文字色が暗い配色の時、アクティブなメニュー文字列が白くなりコントラスト比が不足する問題を修正しました。
- スペースが存在しない時、画面左上のロゴのクリック可能なエリアが狭くなっている問題を修正しました。
- スキーマアップグレード時に「Duplicate key name\.\.\.」エラーが発生するケースの対策をしました。
- デフォルト pt\-view\.php を最新版にしました。
- スペースへのテーマ適用時にシステムルートにファイルが出力される問題を修正しました。
- ワークスペースバーを展開した時に横スクロールバーが出る問題を修正しました。
- DisplayOptions プラグインで、設定がスコープをまたがってキャッシュされる問題を修正しました。
- iOS Safariでプラグイン設定のモーダルがスクロールできない問題を修正しました。
- upload\_max\_filesizeを超えたファイルをアップロードした時のエラー処理を追加しました。
- 環境変数「developer\_mode」を「develop」に変更しました。
- PHP\_INT\_MAXが 2147483647\(32Bit版PHP\) の時に日付が正しく処理されない問題を修正しました。
- \_htaccessの設定「php_value upload\_max\_filesize」を "30M"に変更しました。
- PTUtilクラスに send\_multipart\_mail メソッドを追加しました。
- DATETIME型のカラムのバリデーションを強化しました。
- アクティビティウィジェットが表示されている時特定の画面サイズで画面がチラつく問題を修正しました。
- フォームに「データベースに保存しない」オプションを追加しました。
- フォームへの投稿の添付ファイルをメールに添付できるようになりました。
- コンタクトの編集画面で添付ファイルの表示が崩れていたのを修正しました。
- モデルの編集画面でインデックスを指定できないタイプのカラムにインデックス指定できないように修正しました。

## 2019\-04\-03

version 1\.014

- カスタマイズした設問タイプで設問を保存するとフィールド数欄・コネクタ欄が表示されない問題を修正しました。
- ヘッダーのワークスペース名が長い時の見栄えを整えるため幅を調整しました。
- 再構築ウィンドウのUIを改良しました。
- 再構築処理の際に不要な処理をスキップして若干の高速化を実現しました。
- モディファイア regex\_replace で後方参照が正しく動作しない問題を修正しました。$1などを指定する際は直前にバックスラッシュ「\\」を付けてください。
- mt:varタグで「request\.」から始まるクエリ取得の動作を改良しました。
- グループ機能の対象モデルを「テンプレート・タグ」にチェックのあるモデルを対象にしました。

## 2019\-03\-27

version 1\.013

- モデルに「ベースネームの重複を許可」設定項目を追加しました。
- ベースネームの重複を許可設定されている時、パーマリンクの重複がなければ設定したベースネームがそのまま使われます。
- ベースネームの重複を許可設定されている時、パーマリンクの重複があれば、これまでと同じルールでリネームされます。
- TinyMCEプラグインの設定に「高度な設定」を追加しました。
- MySQLデータベースの SSL接続\(PDO::MYSQL\_ATTR\_SSL\_CA\)をサポートしました。
- プラグイン「HTML\_CodeSniffer」の検証結果の翻訳漏れを修正しました。
- モデル「グループ」のオブジェクト作成画面で、モデル選択ドロップダウンに何も出ない問題を修正しました。
- 環境変数 model\_paths を追加しました。指定したディレクトリにモデルの定義ファイル\(json\)を設置することができます。
- 環境変数 tmpl\_paths を追加しました。指定したディレクトリに代替テンプレートを設置することができます。
- mt:transタグの component属性指定でプラグインのlocaleを利用できるようになりました。
- フォームの保存時「メールを送信する」にチェックがない時、メールアドレスのチェックをスキップするようにしました。
- デバッグモード有効時のフッターのデバッグエリア画面表示を改善しました。
- config\.jsonでのディレクトリ・パスの指定方法を揃えました。tmpl\_paths、plugin\_paths、theme\_paths、model\_pathsの4つが対象です。
- これらの環境変数は、すべて配列でフルパス指定、ディレクトリの末尾には DIRECTORY\_SEPARATOR を含まずに指定してください。
- 環境変数 log\_path を log\_dir に変更しました。
- ファンクションタグ「mt:getregistry」を追加しました。タグ属性 registry / id / keyを指定して値を取得します。
- インストール時にバーの配色を登録するようにしました。
- 無効なプラグインの tmpl / alt-tmplディレクトリのテンプレートを読み込んでしまう問題を修正しました。
- boilerplate モデルが有効化されていない時、オブジェクトの作成・編集画面で errorログが残る問題を修正しました。
- プラグイン管理画面でスキーマアップグレードのメニューのバッヂが表示されない問題を修正しました。
- プラグイン管理画面でプラグインがない時の表示を調整しました。

## 2019\-03\-13

version 1\.012

- モデル編集画面で翻訳漏れがあったのを修正しました。
- オブジェクトの編集画面で、削除時の Confirmメッセージへのアクションを待たずにオブジェクトが削除される問題を修正しました。
- regex\_replace モディファイアおよび replaceモディファイアに渡した属性値の変数が展開されない問題を修正しました。
- 日付アーカイブ以外のコンテナ指定のある URLマップで「オブジェクトがない時アーカイブを出力しない」オプションを追加しました。
- 上記のケースで非ログインユーザーに出力されていないアーカイブが見える問題を修正しました。
- LivePreviewプラグイン設定をデフォルトで承認待ちを含むように変更しました。
- URLMappingのカラムの Index名「publish\_file」が重複していたのを修正しました。
- ダイナミック・パブリッシングで、theme\_staticディレクトリのパスが正しく出力されない問題を修正しました。
- モデル名とかラム名に数字を利用している時、数字付きのテンプレート・タグが登録されない問題を修正しました。
- リレーション型のカラムの名前とラベルが異なる時、ラベル名でのブロックタグも利用できるようになりました。

## 2019\-02\-26

version 1\.011

- メールヘッダ「Return-Path」を環境変数「mail\_return\_path」で設定できるようになりました。
- メールヘッダの文字エンコーディングを環境変数「mail\_encording」で指定できるようになりました。
- PTUtil::encode\_mimeheaderメソッドを追加しました。
- プラグインディレクトリとテーマディレクトリを複数指定できるようになりました。環境変数「plugin\_paths」「theme\_paths」に配列でパスを指定します。
- 上書き防止のため config\.json を config\.json\-original\.json にリネームしました。
- アプリケーションディレクトリをシンボリックリンクに設定できるようになりました。
- テーマのインストール時にテンプレートが正しくコンパイルされない問題を修正しました。
- PADOBaseModelの予約プロパティのキーを追加しました。
- 出力結果のハッシュ値比較の際、更新されているのにファイルが出力されないケースを修正しました。
- テーマのインストール時にフォームの URLが出力されない問題を修正しました。
- リストのフィルタ選択済みの時にフィルタが変更できない問題を修正しました。
- Chrome以外のブラウザでデータ移行画面が正しく表示されない問題を修正しました。
- 特定条件下で一覧のフィルタ削除時にパラメタが引き継がれない問題を修正しました。
- テーマの chache\_keyタグ属性のスペルミスを修正しました。
- テーマの Main Page マークアップを修正しました。

## 2019\-02\-12

version 1\.010

- バージョン番号を1\.010に変更しました。

## 2019\-02\-05

version 1\.009

- テーマの CSSを修正しました。
- ダイアログを閉じるボタンに翻訳漏れがあったのを修正しました。

## 2019\-01\-29

version 1\.008

- プラグイン「EntryImporter」は廃止され、「DataMigrator」プラグインに変更されました。EntryImporterが存在する場合は削除してください。
- 上記プラグインでは、entryモデル\(記事\)の他、page\(ページ\)モデルへのインポートが可能になりました。
- 「DataMigrator」プラグインでは、外部プラグインで独自のデータ移行処理を追加できます。
- ブロックタグ「mtsetvartemplate」タグを利用している時、コンパイルキャッシュが使われない問題を修正しました。
- ブロックタグ「mtsetvartemplate」タグを利用している時、出力結果にゴミが残る問題を修正しました。
- 階層付きオブジェクトのパスを取得するテンプレート・タグで、親オブジェクトが正しくロードされない問題を修正しました。
- メニューのカラー設定がリンクテキスト、ドロップダウンメニューやボタンに反映されない問題を修正しました。
- メニューのカラー設定をフッターにも適用しました。
- 軽量化・高速化のために管理画面のモデルの読み込みを必要なカラムのみにしました。
- カラム「cache\_key」をリビジョン対象から除外しました。
- 新規ユーザー作成時のステータスドロップダウンの初期値を「有効」にしました。

## 2019\-01\-23

version 1\.007

- 再構築処理でプリ・コンパイルされたテンプレートが利用されていなかった問題を修正しました。
- テンプレートマップのマッピングをプリ・コンパイルするようにしました。
- 上記2点の修正と改良により、再構築パフォーマンスが50%近く改善しました。
- カスタムフィールドの「電話番号\(セパレート\)」の input type をnumから tel に修正しました。
- Text\_Diff\_Engine_nativeで「Calling assert\(\) with a string argument is deprecated\.」警告が出ていた問題を修正しました。
- 管理画面でモデルのバージョン指定のある時、アップグレードを抑止できるようになりました。
- バイナリ/ファイル型カラムのファイル変更時古いURLオブジェクトが残る問題を修正しました。
- LivePreview中にウィッジェットの管理画面の背景画像が差しかわる問題を修正しました。
- LivePreview中にブラウザキャッシュを使わせないように変更しました。
- 「widget」モデルの最大画像サイズを設定しました。

## 2019\-01\-16

version 1\.006

- 環境変数「app\_path」指定のある時に、フォームからのメール送信でテンプレート変数「script\_uri」が正しくセットされない問題を修正しました。
- スペース管理者の権限がある時にヘッダのメニューが正しくフィルタリングされない問題を修正しました。
- システムスコープの一覧画面で、スペース毎のステータスとユーザーIDによるフィルタリングが正しく効くようになりました。
- ロールを修正した時、対象ユーザーの権限のキャッシュがクリアされないケースがある件を修正しました。
- モデル「table」のカラム「hierarchy」の初期値を「0」にしました。
- 一覧画面のオブジェクトのチェックボックス表示を権限と連動させました。
- 一覧画面で権限があるのに削除ボタンが非表示になるケースを修正しました。

## 2019\-01\-15

version 1\.005

- スペース管理者がオブジェクトを作成できない\(ボタンが表示されない\)問題を修正しました。
- 「URL」モデルの「delete\_flag」フィールドをデフォルトでリスト表示対象にしました。
- 「ユーザー」モデルのステータスの初期値を「有効\(1\)」にしました。
- フィールド\(カスタムフィールド\)機能をサポートしました。
- グローバルモディファイア「default」を追加しました。値が空の時、指定した属性値を出力します。
- データベースのオブジェクトを var\_dump した時、key => value の配列形式で値を出力するようにしました。
- 削除フラグ\(delete\_flag\)指定のある URLInfoオブジェクトがエクスポートに失敗する問題を修正しました。

## 2019\-01\-10

version 1\.004

- オブジェクトのリスト・フィルタで、複数のリレーションを条件にしている時に複数のフィルタが効かない問題を修正しました。
- relation型の擬似カラムに not\_null指定したオブジェクトが保存できない問題を修正しました。
- Websiteテーマの \.htaccessを修正しました。
- エディタへの画像・ファイル挿入ダイアログの順序入れ替えがキーボード操作可能になりました。
- バイナリ/ファイル型のカラムが空の時、URLタグで動的URLが出力される問題を修正しました。
- Websiteテーマの widgetの背景画像が空の時、動的URLが出力される問題を修正しました。
- ユニークなカラムの検索対象を同一スコープのオブジェクトに限定しました。
- ダイナミック・パブリッシングで複数のスコープに同一URLが存在する時、異なる URLがロードされるケースがある問題を修正しました。
- オブジェクトの作成・編集画面の画面オプションに「ドラッグ&ドロップでフィールドの表示順を変更できます。」のヒント記述を追加しました。
- user\_idがないモデルで、作成権限のあるユーザーが既存のオブジェクトを更新できない点を修正しました。
- DisplayOptionsの指定がある時、権限のないモデルがメニューに表示される問題を修正しました。

## 2019\-01\-07

version 1\.003

- Websiteテーマに「\(Website\) Pagination」モジュールを追加しました。
- Websiteテーマに prism\.js / prism\.css を追加しました。
- ファンクション・タグ「mtarchvetitle」で日付が正しく処理されない問題を修正しました。
- 年度別アーカイブが 1ファイルしか再構築されない問題を修正しました。
- ユーザー作成・編集画面の「入力欄の境界色」の初期値を修正しました。
- エディタへの画像\(ファイル\)挿入時、ダイアログのページ送りをクリックするとパラメタが引き継がれない問題を修正しました。
- CSVインポートの時に存在しない workspace\_id 値が指定されている時、現在のスコープに対してインポートを行うようにしました。
- CSVインポートの時に添付ファイル/アセットが存在しない時に warnings が記録される問題を修正しました。
- editor\.css に table関連のスタイルを追加しました。
- \.htaccess に PHP設定 upload\_max\_filesize\(8M\) を追加しました。
- システムスコープのオブジェクトの一覧画面で、「作成」権限が正しくセットされない問題を修正しました。
- オブジェクトを「リビジョンとして保存」した時、ステータスを下書きにするようにしました。
- アクティビティのグラフからリビジョン数を除外するようにしました。
- PTPlugin クラスに set\_config\_valueメソッドを追加しました。
- システムおよびワークスペースの「設定画面」の言語設定のドロップダウンが翻訳されていない問題を修正しました。
- モデルの編集画面で「Allow Comments」チェックボックスを非表示にしました。
- アクティビティのグラフの凡例のテキストを修正しました。
- データベースの port番号が 3306でない時に、データベース接続できない問題を修正しました。
- サーバー変数 DOCUMENT\_ROOT が「/」で終わっている時に CSS/JS ファイルへのリンクが切れる問題を修正しました。
- ドキュメント\(ユーザーガイド\)を更新しました。

## 2018\-12\-21

version 1\.002

- 一覧画面のチェックボックスの aria\-labelの値がエスケープされていなかった問題を修正しました。
- 管理画面からのオブジェクトの複製時、basename、status、audit関連カラムの値を初期化するようにしました。
- ブロックタグ「mtbreadcrumbs」タグで親オブジェクトがない時に警告が出ていた問題を修正しました。
- ブロックタグ「mtloop」タグで sort\_by タグ属性指定が効いていなかった問題を修正しました。
- ドキュメントの jQueryバージョンが間違っていたのを修正しました\(v3\.2\.1\)。
- ドキュメントのタグ属性のCSV区切り文字が「:」になっていたのを「,」に修正しました。
- 再構築ポップアップウィンドウのサイズを調整しました。
- バイナリ/ファイルタイプのカラムに NOT NULL を指定した時、オブジェクトの保存時に必須チェックがパスされてしまっていた問題を修正しました。
- グローバル・モディファイア encode\_php を追加しました。
- グローバル・モディファイア encode\_xml、メソッド escape\('xml'\)が正しく動作していなかった問題を修正しました。
- グローバル・モディファイア escape の属性値に「js」「xml」「php」が新しく指定可能になりました。
- 画像サムネイルの有無ついて、オブジェクトの Diffの対象外となるようにしました。
- Websiteテーマの \.htaccess で、ErrorDocumentのパスが正しくない問題を修正しました。
- URLInfoオブジェクトが論理削除された時、同一URLのオブジェクトが存在する時は物理削除するようにしました。
- URLMappingモデルの編集画面におけるラベルをPowerCMS互換に変更、ラベル「モデル」を「アーカイブ種別」に、モデルの選択肢「ビュー」を「インデックス」に変更しました。
- ワークフロー設定時にオブジェクトの新規作成時、ステータス変更時に不要なアラートが表示される問題を修正しました。
- アイテム挿入時にチェックボックスがキーボード操作できない問題を修正しました。
- ブロックタグ「mtsethashvars」ファンクションタグ「mtgethashvar」タグを追加しました。
- 環境変数「temp\_dir」の初期値を「/tmp」に変更しました。
- 記事/ページの編集画面で、エラーの際に本文が引き継がれない問題を修正しました。
- 標準関数 eachが非推奨になったことによる Text/Diffのエラーを修正しました。
- テーマの CSSを修正しました。

## 2018\-12\-06

version 1\.0013

- \(公開側ページの\)一覧画面に limit/offset パラメタを指定したとき、ページネーションが有効になるようになりました。
- 外部プレビューのための設定がオブジクトの編集画面に表示されない問題を修正しました。
- 時限公開・差し替え処理の実行時に、再構築トリガーが処理されない問題を修正しました。
- workspace\_id が nullのレコードの値を「0」にセットするアップグレード処理を追加しました。
- 問い合わせフォーム以外の URLマッピングのファイル出力を「ダイナミック」から「静的」に変更しました。
- pageモデルのスキーマバージョンをバージョンアップしました。
- スタティックなページへのリクエストにパラメタがついている時、または GET以外のリクエストの時、動的処理が通るように修正しました。
- テーマの一覧画面にサムネイルを追加しました。

## 2018\-12\-05

version 1\.0012

- フォーム機能でメール From, Cc, Bccを指定できるようになりました。
- 存在しないカラムを sortのキーに指定した時にエラーになる問題を修正しました。
- プレビューで urlmappingが読み込めていない時、エラーを吐いて HTMLがそのまま表示される問題を修正しました。
- 標準関数 eachが非推奨になったことによる Text/Diffのエラーを修正しました。
- テーマの \.htaccess が、ビューから出力された pt\-view\.phpを参照するように修正されました。
- ライブプレビュー時に、リビジョンのファイルの URLが出力されない問題を修正しました。
- テーマに metaタグ\(description, keywords\)を追加しました。
- テンプレートのビルド時にコンパイル済みキャッシュが使われていないケースがある問題を修正しました。
- 特定条件下における Objectをループ出力するブロック・タグの処理速度を向上しました。
- オブジェクトのカウントタグが正しい数字を返さないケースに対する修正を行いました。

## 2018\-12\-03

version 1\.001

- 新規インストール時に\(タイムアウト対策のため\)進捗を表示するようになりました。
- 再構築の最初のリクエスト時にインジケーターを表示するようにしました。
- オブジェクトのカウントタグがコンテキストによって取得できない問題を修正しました。
- テーマにウィジェットの2カラム表示モジュールを追加しました。
- ウィジェット内の a要素に対する CSSを追加しました。
- テーマに \.htaccessと pt-view\.phpを追加しました。
- ファンクションタグ「mtphpstart」「mtphpend」を追加しました。
- フォームの設問で値の連結設定をしている時に、値が空欄の時バリデーション処理でエラーになる問題を修正しました。
- ビューの編集画面で、画面幅を狭くした時にパーマリンク横の「ビュー」リンクが消える問題を修正しました。
- URLマッピングに「優先」カラムを追加しました。同一モデルに複数のマッピングが存在する時、優先指定のあるマッピングがパーマリンクに使われます。
- 特定の条件下で、ダイナミックパブリッシングで正常にページが返されるのにステータスが404になる点を修正しました。
- フォーム投稿時のメール送信処理で、テンプレートモジュールが正常にロードできない問題を修正しました。
- オブジェクトの保存時や再構築時に、pre\_listingコールバックの処理をスキップするようにしました。
- 再構築処理時に未公開のオブジェクトをスキップするようにしました。
- 上記の関係で、オブジェクトのインポート時に、非公開オブジェクトの再構築処理が走るようになりました。
- 404テンプレートで、workspaceコンテキストが正しくセットされない点を修正しました。
- テーマの 404テンプレートを1カラムレイアウトに変更しました。
- 新規オブジェクト作成時に、meta, relationのロード処理が走っていた問題を修正しました。
- テンプレートのキャッシュ機能を有効にしている時、トークンが必要なフォームの投稿がエラーになる問題を修正しました。

## 2018\-11\-25

version 1\.00

- テーマのエクスポート機能、インポート機能を追加しました。
- デフォルトのテーマ「Website」を追加しました。
- サイトマップのツリー表示で、サブフォルダよりもフォルダ直下のオブジェクトを上部に表示できるようにしました。
- スキーマ画面管理・プラグイン管理画面がキーボード操作できない問題を修正しました。
- オブジェクトの編集画面から、オブジェクトが削除できない問題を修正しました。
- メニューオブジェクトのループ出力後に、該当するオブジェクトのプライマリカラム、IDカラム以外のカラム値が空のままキャッシュされてしまう問題を修正しました。
- 別のオブジェクトのコンテキストをセットしたとき、アーカイブオブジェクトのパーマリンクが取得できない問題を修正しました。
- モデルの設定画面でフォームを追加できるようになりました。
- 「ビュー」にフォームを追加しました。
- ファンクションタグ「mtwebsitename」「mtwebsiteurl」「mtwebsitelanguage」「mtwebsiteid」「mtwebsitecopyright」「mtwebsitedescription」を追加しました。
- ファンクションタグ「mthex2rgba」を追加しました。hex指定された色指定を rgba形式に変換します。
- グローバルモディファイア「language\(「ja」などの言語を指定して翻訳\)」「\_eval\(evalとの違いは、\{\{mt:タグ名\}\}形式の記述が利用できる点\)」を追加しました。
- workspace\_id カラムの値が nullの時、システムスコープのビューでオブジェクトの一覧が取得できない問題を修正しました。
- 階層付きオブジェクトが workspace\_id カラムを持つとき、システムスコープではシステムスコープのオブジェクトのみが一覧表示されるようになりました。
- 再構築トリガーがオブジェクトの削除処理の際に処理されない問題を修正しました。
- システム設定に、システムの説明\(description\)を登録できるようになりました。
- スペース設定に、コピーライト\(copyright\)を登録できるようになりました。
- システム設定に、すべてのユーザーのログインにIPアドレス制限が設定できるようになりました。
- システム設定に「許可されたIPアドレスをロックしない」設定が追加されました。
- 設問タイプのマークアップが、tableマークアップに変更され、テーマ「Website」に合わせたクラス名が付与されるようになりました。
- ブロックタグ「mtif」に「tag」モディファイアを指定したとき、eq、likeなどの比較演算子が使えるようになりました。
- フォームの管理者への通知メールが、投稿者のメールアドレスに送信されてしまう問題を修正しました。
- ダイナミックパブリッシングにおいて、不要な SQLクエリが発行されていた問題を修正しました。
- workspace\_idなど、いくつかの数値型のカラムの初期値を NULLから0に修正しました。
- オブジェクトのループ出力、階層表示、リレーション型のカラムを出力するブロックタグで「cols」モディファイア\(SELECT対象のカラム名のカンマ区切り\)が指定できるようになりました。
- id, status, workspace\_idカラムのあるオブジェクトでは「cols」モディファイアに、これらのカラムが自動的に追加されます。
- 「ページ」に対する「フォルダ」、「記事」に対する「カテゴリ」の CSVインポート/エクスポートにおける処理を改良しました。
- 新規インストール時に sessionレコードを取得しに行ってログに warnings が記録される問題を修正しました。
- LivePreview 時に オブジェクトのループ出力のブロック・タグの include\_draft モディファイアが効かない問題を修正しました。
- mtsetcontextブロックタグ内で、元のオブジェクトのカラム値を取得するファンクションタグの値が空になる問題を修正しました。
- テンプレート変数「current\_archive\_model」と「current\_object\_id」をセットするようになりました。
- フォームに「model」「object\_id」パエメタを渡すことで、コンタクトの対象オブジェクトをセットできるようになりました。
- フォームに「identifier」パラメタを渡せるようになりました。
- publish\_obj メソッドで、dependencies\(依存オブジェクトの再構築\)をデフォルトでオフにしました。
- フォームのトークンの有効期限が切れた時、もしくはトークンが無効の時、エラー画面にならない問題を修正しました。
- 「ビュー」の編集画面の表示レスポンスを改善しました。
- 「mtinclude」を含む「ビュー」の編集画面の表示の際に httpd の負荷が上がり、表示に時間がかかる問題を修正しました。
- ドキュメント\(ユーザーガイド\)を更新しました。

## 2018\-11\-12

version 0\.99

- URLマップの作成・編集画面で URLマップが静的生成もしくはオンデマンドの時、再構築トリガーを設定できるようになりました。
- システムスコープの URLマップで「コンテナ」のスコープにスペースのオブジェクトを含まない設定ができるようになりました。
- 「entry」「category」モデルのオブジェクトがシステムスコープに作成できるようになりました。
- 「page」「folder」「widget」モデルを新しく追加しました。
- オブジェクトの作成・編集画面で、数値+階層型のカラムのレイアウトを調整しました。
- システムとワークスペースに作成できるオブジェクトの一覧画面について、「表示順」「階層」指定のあるモデルについては、同一スコープのオブジェクトのみの一覧を表示するようになりました。
- オブジェクトの作成・編集画面で「リレーション」「階層」を指定している時、同一スコープのオブジェクトのみを階層表示するようになりました。
- モデルの編集画面でカラムの「詳細」ダイアログで、\(システムが生成するカラム以外の\)文字列型、数値型、真偽値型のカラムの初期値を設定できるようになりました。
- モデルの設定で「アセット(アセットモデルのリレーション型のカラム)」を作成できるようになりました。通常の関連付けのほか、エディタへの貼り付けで関連アセットが追加されます。
- モデル「記事」にリレーション\(1対多\)型のカラム「アセット」を追加しました。
- URLマップで1対1のリレーションを設定しているモデルを「コンテナ」に指定できるようになりました。
- PHP設定の max\_input\_varsの推奨値より小さな値が設定されている時、モデルの編集画面に警告を表示するようになりました。
- 一覧画面のチェックボックスのアクセシビリティを改善しました\(キーボード操作対応とラベルの付与\)。
- URLの一覧画面ですべてを選択するチェックボックスのラベルで件数が正しくない数字になることがある点を修正しました。
- 「Directory」の翻訳フレーズを「フォルダ」から「ディレクトリ」に変更しました。
- モデル'queue'は今後標準モデルとして追加の可能性があるため、予約名としました。
- 「entry」「page」「widget」モデルで、テキストフォーマットの初期値を選択できるようになりました。
- ツリー表示でディレクトリにアイテムがない時、ログにエラーが残る問題を修正しました。
- リレーション\(1対多\)型のカラムを削除した時、該当する mt\_relationレコードを削除するようになりました。
- システムスコープの URLの一覧からワークスペース配下の URLの物理削除ができない問題を修正しました。
- 論理削除済みの URLに該当するアーカイブの再構築で、同一 URLの URLオブジェクトが生成されてしまう問題を修正しました。
- 「自分のオブジェクト」のみに権限が割り当てられている時、ファイル型のカラムに対する アップロードが 権限エラーになる問題を修正しました。
- ハンバーガーメニューのコントラストを改善しました。
- 階層指定のあるモデルの新規作成画面で、親を選択するとエラーで保存できない問題を修正しました。
- ファンクションタグ「mtassetproperty」が正しい値を返さない問題を修正しました。
- フォームの「Text Input Group」でコネクタの出力をした際に、以降の設問でもコネクタが出力されてしまう問題を修正しました。
- PTUtil::object\_diff メソッドが一部のカラムをスキップしてしまう問題を修正しました。
- 管理者ログイン用のIPアドレスが登録できない問題を修正しました。
- Smarty互換テンプレート記法はサポート対象外となりました。
- ドキュメント\(ユーザーガイド\)を更新しました。

## 2018\-11\-07

version 0\.98

- インストール時にエラーログが記録される点を修正しました。
- スマートフォンで管理画面を利用した時のレイアウトを調整しました。
- オブジェクトの値に絵文字を含められるようになりました。保存できない、または表示できない時は、環境変数「set\_names」に trueを指定してください。
- ブロックタグ「mtnestableobjects」および、リレーションを出力するブロックタグが LivePreviewに対応しました。
- 「メニュー」モデルを追加し、ブロックタグ「mtmenuitems」タグを追加しました。タグは LivePreviewに対応しています。
- これにより、階層付き、任意の並び順のメニューを作成できるようになりました。
- モデルをエクスポートする時、hide\_edit\_options指定のないモデルで warningが発生していた点を修正しました。
- 階層を持つオブジェクトの親に子オブジェクトを指定した時、あるいはルートオブジェクトが存在しなくなってしまう時、エラーを出すようにしました。
- また、階層を持つオブジェクトの編集画面で、子オブジェクトを親に指定できなくなりました。
- 環境変数「password\_letternum\(パスワードに英数字両方を含む\)」を追加しました。
- 環境変数「password\_upperlower\(パスワードに英字大文字小文字両方を含む\)」を追加しました。
- 環境変数「password\_symbol\(パスワードに記号を含む\)」を追加しました。
- 環境変数「password\_min\(パスワードの必要文字数\)」を追加しました。
- TinyMCEプラグインで、メニューバーがカスタマイズできるようになりました。
- ドキュメント\(ユーザーガイド\)を更新しました。

## 2018\-11\-06

# version 0\.97

- 新規インストール時に mt\_sessionテーブルが生成されない問題を修正しました。
- ビューのソースが空の時に、タグパーサがエラーを出していた問題を修正しました。
- 1対1のリレーションの時、タッチデバイスでサムネイルが拡大表示できない問題を修正しました。
- 新規インストール時の「ビュー」のメニュータイプをお気に入り\(Favorites\)に変更しました。

## 2018\-11\-05

# version 0\.96

- リッチテキストエディタ\(TinyMCE\)のバージョンを4\.8\.5にバージョンアップしました。
- TinyMCEプラグイン設定で、モバイルモードの使用を選択できるようになりました。
- サイトマップのツリーでサブフォルダが存在する時にURLが取得できていなかった点を修正しました。
- ダイナミック・パブリッシングで、URLマッピングのコンテナが正しくセットされなかった点を修正しました。
- ブロックタグ「mtarchivelist」が日別アーカイブをサポートしました。
- ブロックタグ「mtsetcontext」タグを追加しました。
- オブジェクトの作成・編集画面でリレーション型のカラム・階層のときの表示レイアウトを調整しました。
- サイトマップのツリーで、権限のない未公開のURLをツリーから除外するようになりました。
- フォーム機能で CSRF対策用の セッションがフォーム投稿後も残る問題を修正しました。
- ビューの compiledカラムをリビジョンの差分対象外としました。
- ダッシュボードウィジェットのドラッグできる領域をウィジェットのヘッダ部分に限定しました。
- ドキュメント\(ユーザーガイド\)を更新しました。

## 2018\-10\-31

# version 0\.95

- モデル「ビュー」のプレビューで warningが発生していた点を修正しました。
- モデル「ビュー」の編集画面で「保存と再構築」ボタンをクリックして保存した時、再構築されない問題を修正しました。
- フォームの確認画面が表示できない点を修正しました。
- ブロックタグ「mtcalendar」を追加しました。
- 日別アーカイブをサポートしました。
- 日付ベースアーカイブの時、URLオブジェクトの archive\_typeが空になっていた点を修正しました。
- リッチテキストへの画像挿入時に、オリジナルの幅と高さを表示するようにしました。
- 作成・編集画面でリレーション\(複数選択ダイアログの時\)の選択済み要素をドラッグして順番を入れ替えた時、バッヂのマージンがなくなる問題を修正しました。
- ドラッグ&ドロップで順番を入れ替え可能な要素\(一覧画面の表示順入れ替えを除く\)がキーボード操作でも順序を入れ替えられるようになりました。
- 一部のフォームコントロールでフォーカスインジケーターが非表示になる問題を修正しました。

## 2018\-10\-30

# version 0\.94

- URLオブジェクトのアクション「URLのリセット」を追加しました。
- URLオブジェクトのアクション「物理削除」でオブジェクトが物理削除されない問題を修正しました。
- 一覧画面からのアクション実行時に、アクションが適用されているのに「対象の\(モデル名\)がありません。」と表示されることがある問題を修正しました。
- アセットの一覧画面からファイルをアップロードした時、warningが発生し、アップロードファイルサイズのチェックが正しく働いていなかった点を修正しました。
- アセットの一覧画面から日本語などマルチバイトのファイル名のファイルをアップロードした時、ラベルが URLエンコードされてしまう問題を修正しました。
- 権限チェックのコードで「すべてのオブジェクト\(update\_all\)」が割り当てられているのに falseを返すことがある問題を修正しました。
- リレーション型のカラムにアセット\(asset\)モデルを指定している時、権限のあるユーザーはアセットのラベルを編集できるようになりました。
- ダイナミック・パブリッシングの時、「URL」「対象のモデル」「ビュー」のうち最も新しいオブジェクトの更新タイムスタンプをブラウザキャッシュの利用基準としました。
- ExternalPreviewプラグインのプラグイン設定の編集画面のUIを改良しました。
- UUIDカラムがない時またはURLが発行されていない時に ExternalPreviewプラグインによる\(編集画面のボタンや日付欄など\)UIを非表示にしました。
- リレーションカラム名に\_などの英数文字以外の記号を含む時、テンプレート・タグが正しく認識されない問題を修正しました。
- データに更新がない時も、URLオブジェクトの最終更新日時が更新されてしまう問題を修正しました。
- ExternalPreviewプラグインによるプレビューに対応させるため、entryモデルと assetモデルにUUIDカラムを追加\(復活\)しました。
- 環境変数 build\_one\_by\_oneがセットされている時、正しい内容・正しいパスにファイルがパブリッシュされない問題を修正しました。

# version 0\.93

## 2018\-10\-29

- db\-config\.php\-original\.txt を db\-config\.php\-original\.php にリネームしました。
- CMSと公開サイトのドメインが異なるとき、公開サイトにログインできる機能を追加しました。
- 非公開のオブジェクトが非ログインユーザーに見えてしまうケースがある問題を修正しました。
- 上記の機能追加により、CMSと公開サイトのドメインが異なるときにログインユーザーが非公開URLを確認できるようになりました。
- 同様にCMSと公開サイトのドメインが異なるときに LivePreviewによる未来日のウェブサイトの確認ができるようになりました。
- オブジェクト名\+Next、Previousブロックタグにタグ属性 rebuild="1" 指定で\(オブジェクトの保存時の再構築に限り\)前後のオブジェクトを再構築するようになりました。
- 記事・アセットの公開日・非公開日が正しく保存されない問題を修正しました。
- アップグレード処理のタイムアウト時間を延ばしました。
- URLの一覧画面で、検索結果が正しい結果を返さない問題を修正しました。
- インポート機能で、アップロードファイルがインポート前に削除されてしまう問題を修正しました。
- プラグイン「EntryImporter」でインポートの進捗が画面に出力されない問題を修正しました。

# version 0\.92

## 2018\-10\-25

- 【重要】db\-config\.phpの定数名が変更になりました。各定数の先頭に「PADO\_」を追加してください。
- db\-config\.php を db\-config\.php\-original\.txt にリネームしました。
- データベースのスキーマアップグレードをダッシュボードとバッジで知らせるようになりました。
- アクティビティ・ダッシュボードウィジェットが特定のウィンドウサイズでちらつく問題を解消しました。
- MySQLの設定で ONLY\_FULL\_GROUP\_BYが指定されている時、アクティビティ・ダッシュボードがエラーになる点を修正しました。
- アクティビティ・ダッシュボードのグラフが公開日・作成日ベースから更新日ベースに変更されました。
- 最初のインストール時にログを記録するようになりました。
- Internet Explorer 11でオブジェクトの保存が重複する問題を修正しました。
- Internet Explorer 11 / Microsoft Edgeで一部の画面が崩れる問題を修正しました。
- 一部のモーダル画面が iOS・Safariでスクロールできない問題を修正しました。
- ビューの編集画面のテンプレート・タグの構文チェックで閉じタグがあるのに見つからないエラーとなる点を修正しました。
- ビューの編集画面のテンプレート・タグの構文チェックのエラーメッセージを翻訳しました。
- 一覧画面での「階層の管理」ボタンを画面幅が狭い時にアイコン表示になるようにしました。
- ステータスを公開に変更して保存した時に不要なリビジョン・添付ファイルが生成される問題を解消しました。
- お知らせをダッシュボードに追加し、バージョンアップ情報などをダッシュボードで確認できるようになりました。
- 「イベントとニュース」ダッシュボードを追加しました。
- インポートや worker\.phpなど、多くの処理を実行する際にメモリ不足となる可能性がある点を解消しました。
- また、これらの多くの処理を実行する際に PHPのタイムアウトを延長できるようにしました\(デフォルト3600秒\)。
- ウィジェットのデフォルト表示順をプラグインなどで指定できるようになりました。
- テンプレート変数 app\_version で、バージョン情報を取得できるようにしました。
- インストール時のアプリ名、コピーライトの初期値を設定済みにしました。
- 環境変数 image\_qualityで、サムネイルなどを作成する際の画像圧縮率を数値指定\(デフォルト60\)できるようになりました\(0\(最低品質\)〜100\(最高品質\)\)。
- 環境変数 error\_document404で、エラーページのパスを指定できるようになりました。
- アイテムの新規作成画面でラベル欄が空の時、アップロード時にファイル名をラベル欄にセットするようにしました。
- モデル「記事」のデフォルトカラム「og\_image」は削除されました。後から追加することはできます。
- デバッグモードが有効の時、モーダルダイアログや管理画面のページ下部が隠れてしまう点を修正しました。

# version 0\.91

## 2018\-10\-23

- 【重要】db\-config\.json\.cgiは セキュリティの観点から db\-config\.phpに変更されました。後方互換性は維持されています。
- ビューの編集画面でテンプレート・タグの構文チェックを行えるようになりました。
- ビューの編集画面で CodeMirrorのシンタックスハイライトにテンプレート・タグが対応していない点を修正しました。
- アクティビティ・ダッシュボードウィジェットで任意のモデルを選択できるようになりました。
- MySQLデータベースのテーブル圧縮に対応しました。
- 直列型ワークフローが設定されている時のUIを改善しました。
- テンプレート\(ビュー\)のインライン変数はサポート外になりました。
- ワークスペースのツールバーをユーザー設定で画面上部に固定できるようになりました。
- 画面幅を狭めた時もワークスペースのセレクタが常時表示されるようになりました。
- CSVからのインポート速度が高速化されました。
- モデルへの添付ファイル機能が追加されました。
- ファイルアップロードオプション\(画像サイズ、最大容量\)の設定が可能になりました。
- カスタム・設問タイプのクラス指定が可能になりました。
- モデルのメニュータイプ「お気に入り\(Favorites\)」が追加されました。
- URLオブジェクト\(urlinfoモデル\)を論理削除するように変更しました。
- デフォルトのモデルからUUIDカラムを削除しました。後から追加は可能です。
- デバッグモードが有効の時、デバッグ表示エリアの大きさをマウスドラッグで変更できるようになりました。
- ドキュメント\(ユーザーガイド\)を更新しました。
